<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¨ Figma MCP Server ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #4a5568;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s ease;
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        .setup-section {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .step {
            margin: 15px 0;
            padding: 15px;
            background: #fff;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .test-results {
            background: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            margin: 10px 0;
        }
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .tool-card {
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            padding: 20px;
            background: #f8fafc;
        }
        .figma-icon {
            color: #f24e1e;
            font-size: 1.2em;
        }
        code {
            background: #2d3748;
            color: #e2e8f0;
            padding: 10px;
            border-radius: 5px;
            display: block;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¨ Figma MCP Server ãƒ†ã‚¹ãƒˆ</h1>
        
        <div id="connection-status" class="status info">
            ğŸ” Figma MCPã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šä¸­...
        </div>

        <div class="setup-section">
            <h2>ğŸ“‹ Figma MCPã‚µãƒ¼ãƒãƒ¼ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †</h2>
            
            <div class="step">
                <h3>ã‚¹ãƒ†ãƒƒãƒ— 1: Figmaãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã®è¨­å®š</h3>
                <ol>
                    <li>Figmaãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚’é–‹ã</li>
                    <li>å·¦ä¸Šã® <strong>Figmaãƒ¡ãƒ‹ãƒ¥ãƒ¼</strong> â†’ <strong>åŸºæœ¬è¨­å®š</strong></li>
                    <li><strong>ã€ŒDev Mode MCPã‚µãƒ¼ãƒãƒ¼ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã€</strong> ã‚’é¸æŠ</li>
                    <li>ç”»é¢ä¸‹éƒ¨ã«ç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª</li>
                </ol>
                <div class="status warning">
                    âš ï¸ æ³¨æ„: Figmaãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‹ã‚‰ã®ã¿åˆ©ç”¨å¯èƒ½ã§ã™
                </div>
            </div>

            <div class="step">
                <h3>ã‚¹ãƒ†ãƒƒãƒ— 2: ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹ã®ç¢ºèª</h3>
                <p>ã‚µãƒ¼ãƒãƒ¼ã¯ä»¥ä¸‹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã§å‹•ä½œã—ã¾ã™ï¼š</p>
                <code>http://127.0.0.1:3845/sse</code>
                <button class="button" onclick="testFigmaConnection()">
                    ğŸ”— Figma MCPã‚µãƒ¼ãƒãƒ¼æ¥ç¶šãƒ†ã‚¹ãƒˆ
                </button>
            </div>

            <div class="step">
                <h3>ã‚¹ãƒ†ãƒƒãƒ— 3: Cursor ã§ã®è¨­å®š</h3>
                <p>ä»¥ä¸‹ã®è¨­å®šã‚’Cursor ã®MCPè¨­å®šã«è¿½åŠ ã—ã¦ãã ã•ã„ï¼š</p>
                <code>{
  "mcpServers": {
    "figma": {
      "url": "http://127.0.0.1:3845/sse"
    }
  }
}</code>
            </div>
        </div>

        <div class="setup-section">
            <h2>ğŸ› ï¸ åˆ©ç”¨å¯èƒ½ãªFigmaãƒ„ãƒ¼ãƒ«</h2>
            <div class="tools-grid">
                <div class="tool-card">
                    <h3><span class="figma-icon">ğŸ–¼ï¸</span> ãƒ•ãƒ¬ãƒ¼ãƒ ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ</h3>
                    <p>Figmaã§é¸æŠã—ãŸãƒ•ãƒ¬ãƒ¼ãƒ ã‚„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•ç”Ÿæˆ</p>
                    <button class="button" onclick="testFrameToCode()">
                        ğŸš€ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
                    </button>
                </div>
                
                <div class="tool-card">
                    <h3><span class="figma-icon">ğŸ¨</span> ãƒ‡ã‚¶ã‚¤ãƒ³æƒ…å ±æŠ½å‡º</h3>
                    <p>å¤‰æ•°ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—</p>
                    <button class="button" onclick="testDesignExtraction()">
                        ğŸš€ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
                    </button>
                </div>
                
                <div class="tool-card">
                    <h3><span class="figma-icon">ğŸ”—</span> Code Connecté€£æº</h3>
                    <p>å®Ÿéš›ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨é€£æºã—ã¦ã‚³ãƒ¼ãƒ‰å“è³ªå‘ä¸Š</p>
                    <button class="button" onclick="testCodeConnect()">
                        ğŸš€ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
                    </button>
                </div>
            </div>
        </div>

        <div class="setup-section">
            <h2>ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœ</h2>
            <div id="test-results" class="test-results">
ãƒ†ã‚¹ãƒˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...
            </div>
        </div>

        <div class="setup-section">
            <h2>ğŸ’¡ ä½¿ç”¨ä¾‹</h2>
            <h3>Cursor ã§ã®ä½¿ç”¨æ–¹æ³•</h3>
            <ol>
                <li>Figmaã§ãƒ•ãƒ¬ãƒ¼ãƒ ã‚„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’é¸æŠ</li>
                <li>Cursor ã®AIãƒãƒ£ãƒƒãƒˆã§æŒ‡ç¤ºï¼š</li>
            </ol>
            <code>ã€Œé¸æŠä¸­ã®Figmaãƒ•ãƒ¬ãƒ¼ãƒ ã‚’Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦å®Ÿè£…ã—ã¦ãã ã•ã„ã€</code>
            <code>ã€Œã“ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã®CSSã‚¹ã‚¿ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€</code>
            <code>ã€ŒFigmaã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€</code>
        </div>

        <div class="setup-section">
            <h2>ğŸ†˜ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>
            <div class="step">
                <h3>æ¥ç¶šã‚¨ãƒ©ãƒ¼ã®å ´åˆ</h3>
                <ul>
                    <li>Figmaãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª</li>
                    <li>Dev Mode MCPã‚µãƒ¼ãƒãƒ¼ãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª</li>
                    <li>ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã§ãƒãƒ¼ãƒˆ3845ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ãªã„ã‹ç¢ºèª</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        const FIGMA_MCP_URL = 'http://127.0.0.1:3845/sse';
        
        async function testFigmaConnection() {
            const statusDiv = document.getElementById('connection-status');
            const resultsDiv = document.getElementById('test-results');
            
            statusDiv.className = 'status info';
            statusDiv.innerHTML = 'ğŸ”„ Figma MCPã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šä¸­...';
            
            try {
                // SSEæ¥ç¶šã®ãƒ†ã‚¹ãƒˆ
                const eventSource = new EventSource(FIGMA_MCP_URL);
                
                eventSource.onopen = function(event) {
                    statusDiv.className = 'status success';
                    statusDiv.innerHTML = 'âœ… Figma MCPã‚µãƒ¼ãƒãƒ¼ã«æ­£å¸¸ã«æ¥ç¶šã•ã‚Œã¾ã—ãŸï¼';
                    
                    resultsDiv.textContent = 
                        'âœ… æ¥ç¶šæˆåŠŸï¼\n' +
                        `URL: ${FIGMA_MCP_URL}\n` +
                        `æ¥ç¶šæ™‚åˆ»: ${new Date().toLocaleString('ja-JP')}\n` +
                        'ãƒ—ãƒ­ãƒˆã‚³ãƒ«: Server-Sent Events (SSE)\n' +
                        'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–';
                    
                    eventSource.close();
                };
                
                eventSource.onerror = function(event) {
                    statusDiv.className = 'status error';
                    statusDiv.innerHTML = 'âŒ Figma MCPã‚µãƒ¼ãƒãƒ¼ã¸ã®æ¥ç¶šã«å¤±æ•—ã—ã¾ã—ãŸ';
                    
                    resultsDiv.textContent = 
                        'âŒ æ¥ç¶šã‚¨ãƒ©ãƒ¼\n' +
                        'ã‚¨ãƒ©ãƒ¼åŸå› ã®å¯èƒ½æ€§:\n' +
                        '1. Figmaãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã—ã¦ã„ãªã„\n' +
                        '2. Dev Mode MCPã‚µãƒ¼ãƒãƒ¼ãŒç„¡åŠ¹\n' +
                        '3. ãƒãƒ¼ãƒˆ3845ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹\n' +
                        '4. SSEæ¥ç¶šãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„';
                    
                    eventSource.close();
                };
                
                // 5ç§’å¾Œã«ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
                setTimeout(() => {
                    if (eventSource.readyState === EventSource.CONNECTING) {
                        eventSource.close();
                        statusDiv.className = 'status warning';
                        statusDiv.innerHTML = 'âš ï¸ æ¥ç¶šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ - Figmaã‚¢ãƒ—ãƒªã®çŠ¶æ…‹ã‚’ç¢ºèªã—ã¦ãã ã•ã„';
                        
                        resultsDiv.textContent = 
                            'âš ï¸ æ¥ç¶šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ\n' +
                            'ç¢ºèªäº‹é …:\n' +
                            '1. Figmaãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªãŒèµ·å‹•ä¸­ã‹\n' +
                            '2. åŸºæœ¬è¨­å®šã§MCPã‚µãƒ¼ãƒãƒ¼ãŒæœ‰åŠ¹ã‹\n' +
                            '3. Figmaãƒ•ã‚¡ã‚¤ãƒ«ãŒé–‹ã‹ã‚Œã¦ã„ã‚‹ã‹';
                    }
                }, 5000);
                
            } catch (error) {
                statusDiv.className = 'status error';
                statusDiv.innerHTML = `âŒ æ¥ç¶šã‚¨ãƒ©ãƒ¼: ${error.message}`;
                
                resultsDiv.textContent = `âŒ äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼: ${error.message}`;
            }
        }
        
        async function testFrameToCode() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.textContent = 
                'ğŸ–¼ï¸ ãƒ•ãƒ¬ãƒ¼ãƒ ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ†ã‚¹ãƒˆ\n\n' +
                'æ³¨æ„: ã“ã®ãƒ†ã‚¹ãƒˆã«ã¯Figmaã§é¸æŠã•ã‚ŒãŸãƒ•ãƒ¬ãƒ¼ãƒ ãŒå¿…è¦ã§ã™\n\n' +
                'æ‰‹é †:\n' +
                '1. Figmaã§ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’é¸æŠ\n' +
                '2. Cursorã§ã€Œé¸æŠä¸­ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã—ã¦ã€ã¨æŒ‡ç¤º\n' +
                '3. AIãŒMCPã‚µãƒ¼ãƒãƒ¼çµŒç”±ã§ãƒ‡ã‚¶ã‚¤ãƒ³æƒ…å ±ã‚’å–å¾—\n' +
                '4. å¯¾å¿œã™ã‚‹ã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã‚‹\n\n' +
                'ã“ã®ãƒ†ã‚¹ãƒˆã¯å®Ÿéš›ã®Figmaé¸æŠãŒå¿…è¦ãªãŸã‚ã€\n' +
                'Cursorå†…ã§ã®ã¿å®Œå…¨ã«ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚';
        }
        
        async function testDesignExtraction() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.textContent = 
                'ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³æƒ…å ±æŠ½å‡ºãƒ†ã‚¹ãƒˆ\n\n' +
                'åˆ©ç”¨å¯èƒ½ãªæƒ…å ±:\n' +
                'â€¢ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®šç¾©\n' +
                'â€¢ ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³\n' +
                'â€¢ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæƒ…å ±\n' +
                'â€¢ ã‚¹ã‚¿ã‚¤ãƒ«å¤‰æ•°\n' +
                'â€¢ ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ\n' +
                'â€¢ ãƒ•ã‚©ãƒ³ãƒˆæƒ…å ±\n\n' +
                'Cursorã§ã®ä½¿ç”¨ä¾‹:\n' +
                'ã€ŒFigmaã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰å¤‰æ•°ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€\n' +
                'ã€Œã“ã®ãƒšãƒ¼ã‚¸ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹é€ ã‚’åˆ†æã—ã¦ãã ã•ã„ã€';
        }
        
        async function testCodeConnect() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.textContent = 
                'ğŸ”— Code Connecté€£æºãƒ†ã‚¹ãƒˆ\n\n' +
                'Code Connectã®åˆ©ç‚¹:\n' +
                'â€¢ å®Ÿéš›ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã®æ•´åˆæ€§\n' +
                'â€¢ ä¸€è²«ã—ãŸã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«\n' +
                'â€¢ ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã¨ã®é€£æº\n' +
                'â€¢ ä¿å®ˆæ€§ã®å‘ä¸Š\n\n' +
                'è¨­å®šæ–¹æ³•:\n' +
                '1. ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®šç¾©\n' +
                '2. Code Connectã§ãƒãƒƒãƒ”ãƒ³ã‚°ã‚’è¨­å®š\n' +
                '3. AIãŒã‚³ãƒ¼ãƒ‰ç”Ÿæˆæ™‚ã«è‡ªå‹•çš„ã«å‚ç…§\n\n' +
                'è©³ç´°: https://help.figma.com/hc/ja/articles/code-connect';
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«æ¥ç¶šãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
        window.addEventListener('load', testFigmaConnection);
    </script>
</body>
</html> 